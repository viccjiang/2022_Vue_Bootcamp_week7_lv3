{"version":3,"sources":["webpack:///./src/views/UserAllProducts.vue","webpack:///./src/views/UserAllProducts.vue?4db1"],"names":["class","role","_createElementVNode","_hoisted_21","_createVNode","_component_Loading","active","$data","onClick","$options","href","_createElementBlock","_Fragment","key","_renderList","item","id","style","backgroundImage","imageUrl","_toDisplayString","category","title","description","price","origin_price","_ctx","currency","type","disabled","status","loadingItem","_hoisted_22","includes","_hoisted_24","_hoisted_25","_component_Pagination","pages","onUpdatePage","storageMethods","save","favorite","favoriteString","JSON","stringify","localStorage","setItem","get","parse","getItem","data","isLoading","products","product","pagination","myFavorite","components","Pagination","provide","emitter","methods","addMyFavorite","console","log","this","splice","indexOf","push","getProducts","page","url","process","$http","then","response","getCategory","getProduct","$router","addCart","cart","product_id","qty","post","res","emit","watch","handler","deep","mounted","__exports__","render"],"mappings":"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","file":"js/chunk-2d0c06ec.6c9897ca.js","sourcesContent":["<template>\n  <Loading :active=\"isLoading\"></Loading>\n  <div class=\"container\">\n    <div class=\"row\">\n      <!-- 左側分類欄 -->\n      <div class=\"col-3 mt-4\">\n      <!-- 查詢商品 -->\n      <!-- <div class=\"form-floating\">\n        <input type=\"text\" class=\"form-control mb-3\" id=\"search\" placeholder=\"Search\" v-model.lazy=\"cacheSearch\">\n        <label class=\"text-secondary\" for=\"search\">查詢商品</label>\n      </div> -->\n        <!-- 左側分類欄 -->\n        <div class=\"list-group rounded-0\">\n          <a\n            class=\"list-group-item list-group-item-action\"\n            @click.prevent=\"getProducts('')\"\n            >全部 </a>\n          <a\n            href=\"#\"\n            class=\"list-group-item list-group-item-action\"\n            @click.prevent=\"getCategory('沙發')\"\n            >沙發</a\n          >\n          <a\n            href=\"#\"\n            class=\"list-group-item list-group-item-action\"\n            @click.prevent=\"getCategory('椅子')\"\n            >椅子</a\n          >\n          <a\n            href=\"#\"\n            class=\"list-group-item list-group-item-action\"\n            @click.prevent=\"getCategory('桌子')\"\n            >桌子</a\n          >\n        </div>\n      </div>\n      <!-- 右側產品列 -->\n      <div class=\"col-9\">\n        <div class=\"row mt-4\">\n          <div class=\"col mb-4\">\n            <div class=\"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4\">\n             <template v-if=\"products\">\n                <div class=\"col\" v-for=\"item in products\" :key=\"item.id\">\n                <div class=\"card h-100 rounded-0\">\n                  <a\n                    href=\"#\"\n                    class=\"rounded-0 \"\n                    @click.prevent=\"getProduct(item.id)\"\n                  >\n                    <div\n                      style=\"\n                        height: 300px;\n                        background-size: cover;\n                        background-position: center;\n                      \"\n                      :style=\"{ backgroundImage: `url(${item.imageUrl})` }\"\n                    ></div>\n                  </a>\n                  <!-- <img :src=\"item.imageUrl\" class=\"card-img-top\" alt=\"...\" /> -->\n                  <div class=\"card-body\">\n                    <span class=\"badge bg-secondary text-light mb-2\">{{\n                      item.category\n                    }}</span>\n                    <h5 class=\"card-title\">{{ item.title }}</h5>\n                    <h6 class=\"h6 text-secondary\">\n                      {{ item.description }}\n                    </h6>\n\n                    <div class=\"h5 list-inline-item\" v-if=\"!item.price\">\n                      {{ item.origin_price }} 元\n                    </div>\n                    <del\n                      class=\"h6 list-inline-item text-secondary mt-4\"\n                      v-if=\"item.price\"\n                      >原價 NT$\n                      {{ $filters.currency(item.origin_price) }} 元</del\n                    >\n                    <div class=\"h5 text-danger mb-3\" v-if=\"item.price\">\n                      NT$ {{ $filters.currency(item.price) }} 元\n                    </div>\n                    <!-- 按鈕 -->\n                    <div class=\"d-grid gap-2 col-12 mx-auto\">\n                      <!-- 加入購物車 -->\n                      <button\n                        type=\"button\"\n                        class=\"btn btn-outline-secondary rounded-0 border\"\n                        :disabled=\"this.status.loadingItem === item.id\"\n                        @click=\"addCart(item.id)\"\n                      >\n                        <div\n                          v-if=\"this.status.loadingItem === item.id\"\n                          class=\"spinner-border text-danger spinner-border-sm\"\n                          role=\"status\"\n                        >\n                          <span class=\"visually-hidden\">Loading...</span>\n                        </div>\n                        加到購物車\n                      </button>\n                      <!-- 我的最愛 -->\n                      <button\n                        type=\"button\"\n                        @click=\"addMyFavorite(item)\"\n                        :class=\"{ active: myFavorite.includes(item.id) }\"\n                        class=\"\n                          btn\n                          d-block\n                          btn-outline-secondary\n                          rounded-0\n                          border\n                        \"\n                      >\n                        加到我的最愛\n                      </button>\n                      <!-- 查看細節 -->\n                      <button\n                        type=\"button\"\n                        class=\"btn btn-outline-secondary rounded-0 border\"\n                        @click=\"getProduct(item.id)\"\n                      >\n                        查看更多\n                      </button>\n                    </div>\n                  </div>\n                </div>\n                </div>\n              </template>\n            </div>\n          </div>\n          <!-- 分頁 -->\n          <Pagination\n            :pages=\"pagination\"\n            @update-page=\"getProducts\"\n          ></Pagination>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport emitter from '@/methods/emitter';\nimport Pagination from '../components/Pagination.vue';\n// LocalStorage\n// 轉型\nconst storageMethods = {\n  save(favorite) {\n    const favoriteString = JSON.stringify(favorite);\n    // hexFavorite\n    localStorage.setItem('hexFavorite', favoriteString);\n  },\n  get() {\n    return JSON.parse(localStorage.getItem('hexFavorite'));\n  },\n};\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      products: [],\n      product: {},\n      pagination: '',\n      category: '',\n      status: {\n        loadingItem: '', // 對應品項 id\n      },\n      myFavorite: storageMethods.get() || [],\n    };\n  },\n  components: {\n    Pagination,\n  },\n  provide() {\n    return {\n      emitter,\n    };\n  },\n  methods: {\n    addMyFavorite(item) {\n      console.log('addMyFavorite');\n      // this.myFavorite.push(item.id);\n      if (this.myFavorite.includes(item.id)) {\n        this.myFavorite.splice(this.myFavorite.indexOf(item.id), 1);\n      } else {\n        this.myFavorite.push(item.id);\n      }\n      console.log(this.myFavorite);\n      // storageMethods.save(this.myFavorite);\n    },\n    getProducts(page = 1) {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products?page=${page}`;\n      this.$http.get(url)\n        .then((response) => {\n          this.products = response.data.products;\n          this.pagination = response.data.pagination;\n          console.log('取得全部', this.products);\n          this.isLoading = false;\n        });\n      // .catch((error) => {\n      //   this.$httpMessageState(error, '連線錯誤');\n      //   this.isLoading = false;\n      // });\n    },\n    getCategory(category, page = 1) {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products?category=${category}&page=${page}`;\n      this.$http.get(url)\n        .then((response) => {\n          console.log(response.data);\n          this.products = response.data.products;\n          this.pagination = response.data.pagination;\n          this.category = response.data.products.category;\n          console.log('取得全部', this.products);\n          console.log('取得分頁', this.pagination);\n          console.log(this.category);\n          this.isLoading = false;\n        });\n      // .catch((error) => {\n      //   this.$httpMessageState(error, '連線錯誤');\n      //   this.isLoading = false;\n      // });\n    },\n    // getCategories() {\n    //   // Vue 3 雙向綁定 Proxy(new Proxy 物件)\n    //   // new Set\n    //   const categories = new Set();\n    //   this.products.forEach((item) => {\n    //     categories.add(item.category);\n    //   });\n    //   this.categories = [...categories];\n    // },\n    getProduct(id) {\n      this.$router.push(`/product/${id}`);\n    },\n    addCart(id) {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`;\n      this.status.loadingItem = id;\n      const cart = {\n        product_id: id,\n        qty: 1,\n      };\n      this.$http.post(url, { data: cart }).then((res) => {\n        this.status.loadingItem = '';\n        console.log(res);\n        emitter.emit('update-cart'); // 更新購物車數量\n      });\n    },\n  },\n  watch: {\n    // selectCategory(newValue, preValue) {\n    //   if (newValue === '' || preValue === '') {\n    //     this.getProducts();\n    //   }\n    // },\n    myFavorite: {\n      // 深層監聽\n      handler() {\n        storageMethods.save(this.myFavorite);\n      },\n      deep: true,\n    },\n  },\n  // computed: {\n  //   // 產生新的資料集\n  //   // filterProducts() {\n  //   //   return this.products.filter((item) => item.category.match(this.selectCategory));\n  //   //   // 空字串，或任何符合結果都會是 “真值”\n  //   // },\n  // },\n  mounted() {\n    // 改為 mounted\n    // this.$http.defaults.baseURL = process.env.VUE_APP_API;\n    this.getProducts();\n  },\n};\n</script>\n","import { render } from \"./UserAllProducts.vue?vue&type=template&id=296fa2d7\"\nimport script from \"./UserAllProducts.vue?vue&type=script&lang=js\"\nexport * from \"./UserAllProducts.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\六角學院\\\\2022春季 vue直播班\\\\week7_主線任務lv3\\\\week7_lv3\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}