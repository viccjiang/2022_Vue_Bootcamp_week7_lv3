{"version":3,"sources":["webpack:///./src/views/SwiperTest.vue","webpack:///./src/views/SwiperTest.vue?4a51"],"names":["class","role","_createElementVNode","_hoisted_22","_createVNode","_component_Loading","active","_ctx","_component_swiper","slides-per-view","space-between","_createElementBlock","_Fragment","_renderList","$data","item","_createBlock","_component_swiper_slide","key","id","style","backgroundImage","imageUrl","href","onClick","_hoisted_5","$options","_toDisplayString","category","title","description","price","origin_price","currency","type","disabled","status","loadingItem","_hoisted_23","includes","_hoisted_25","_hoisted_26","_component_Pagination","pages","onEmitPages","storageMethods","save","favorite","favoriteString","JSON","stringify","localStorage","setItem","get","parse","getItem","data","products","product","pagination","categories","selectCategory","myFavorite","components","Pagination","Swiper","SwiperSlide","provide","emitter","methods","addMyFavorite","console","log","this","splice","indexOf","push","getProducts","page","url","process","isLoading","$http","then","response","success","getCategories","Set","forEach","add","getProduct","$router","addCart","cart","product_id","qty","post","res","emit","watch","handler","deep","computed","filterProducts","filter","match","created","__exports__","render"],"mappings":"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","file":"js/chunk-2d0aa934.dc707d0c.js","sourcesContent":["<template>\n  <Loading :active=\"isLoading\"></Loading>\n  <swiper\n    :slides-per-view=\"1\"\n    :space-between=\"50\"\n  >\n    <swiper-slide v-for=\"item in products\" :key=\"item.id\">\n      <div\n      style=\"height:300px; background-position: center center; background-size: cover\"\n      :style=\"{backgroundImage: `url(${item.imageUrl})`}\"\n      >\n      </div>\n    </swiper-slide>\n  </swiper>\n  <div class=\"container\">\n    <div class=\"row\">\n      <!-- 左側分類欄 -->\n      <div class=\"col-3 mt-4\">\n        <div class=\"list-group rounded-0\">\n          <a\n            href=\"#\"\n            v-for=\"item in categories\"\n            :key=\"item\"\n            class=\"list-group-item list-group-item-action\"\n            @click.prevent=\"selectCategory = item\"\n            >{{ item }}</a\n          >\n        </div>\n      </div>\n      <!-- 右側產品列 -->\n      <div class=\"col-9\">\n        <div class=\"row mt-4\">\n          <div class=\"col mb-4\">\n            <div class=\"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4\">\n              <div class=\"col\" v-for=\"item in filterProducts\" :key=\"item.id\">\n                <div class=\"card h-100 rounded-0\">\n                  <a\n                    href=\"#\"\n                    class=\"rounded-0 \"\n                    @click.prevent=\"getProduct(item.id)\"\n                  >\n                    <div\n                      style=\"\n                        height: 300px;\n                        background-size: cover;\n                        background-position: center;\n                      \"\n                      :style=\"{ backgroundImage: `url(${item.imageUrl})` }\"\n                    ></div>\n                  </a>\n                  <!-- <img :src=\"item.imageUrl\" class=\"card-img-top\" alt=\"...\" /> -->\n                  <div class=\"card-body\">\n                    <span class=\"badge bg-secondary text-light mb-2\">{{\n                      item.category\n                    }}</span>\n                    <h5 class=\"card-title\">{{ item.title }}</h5>\n                    <h6 class=\"h6 text-secondary\">\n                      {{ item.description }}\n                    </h6>\n\n                    <div class=\"h5 list-inline-item\" v-if=\"!item.price\">\n                      {{ item.origin_price }} 元\n                    </div>\n                    <del\n                      class=\"h6 list-inline-item text-secondary mt-4\"\n                      v-if=\"item.price\"\n                      >原價 NT$\n                      {{ $filters.currency(item.origin_price) }} 元</del\n                    >\n                    <div class=\"h5 text-danger mb-3\" v-if=\"item.price\">\n                      NT$ {{ $filters.currency(item.price) }} 元\n                    </div>\n                    <!-- 按鈕 -->\n                    <div class=\"d-grid gap-2 col-12 mx-auto\">\n                      <!-- 加入購物車 -->\n                      <button\n                        type=\"button\"\n                        class=\"btn btn-outline-secondary rounded-0 border\"\n                        :disabled=\"this.status.loadingItem === item.id\"\n                        @click=\"addCart(item.id)\"\n                      >\n                        <div\n                          v-if=\"this.status.loadingItem === item.id\"\n                          class=\"spinner-border text-danger spinner-border-sm\"\n                          role=\"status\"\n                        >\n                          <span class=\"visually-hidden\">Loading...</span>\n                        </div>\n                        加到購物車\n                      </button>\n                      <!-- 我的最愛 -->\n                      <button\n                        type=\"button\"\n                        @click=\"addMyFavorite(item)\"\n                        :class=\"{ active: myFavorite.includes(item.id) }\"\n                        class=\"\n                          btn\n                          d-block\n                          btn-outline-secondary\n                          rounded-0\n                          border\n                        \"\n                      >\n                        加到我的最愛\n                      </button>\n                      <!-- 查看細節 -->\n                      <button\n                        type=\"button\"\n                        class=\"btn btn-outline-secondary rounded-0 border\"\n                        @click=\"getProduct(item.id)\"\n                      >\n                        查看更多\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <!-- 分頁 -->\n          <Pagination\n            :pages=\"pagination\"\n            @emit-pages=\"getProducts\"\n          ></Pagination>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Swiper, SwiperSlide } from 'swiper/vue/swiper-vue';\nimport emitter from '@/methods/emitter';\nimport Pagination from '../components/Pagination.vue';\n\nimport 'swiper/swiper.scss'; // core Swiper\n// LocalStorage\n// 轉型\nconst storageMethods = {\n  save(favorite) {\n    const favoriteString = JSON.stringify(favorite);\n    // hexFavorite\n    localStorage.setItem('hexFavorite', favoriteString);\n  },\n  get() {\n    return JSON.parse(localStorage.getItem('hexFavorite'));\n  },\n};\nexport default {\n  data() {\n    return {\n      products: [],\n      product: {},\n      pagination: {},\n      status: {\n        loadingItem: '', // 對應品項 id\n      },\n      categories: [],\n      selectCategory: '',\n      myFavorite: storageMethods.get() || [],\n    };\n  },\n  components: {\n    Pagination,\n    Swiper,\n    SwiperSlide,\n  },\n  provide() {\n    return {\n      emitter,\n    };\n  },\n  methods: {\n    addMyFavorite(item) {\n      console.log('addMyFavorite');\n      // this.myFavorite.push(item.id);\n      if (this.myFavorite.includes(item.id)) {\n        this.myFavorite.splice(this.myFavorite.indexOf(item.id), 1);\n      } else {\n        this.myFavorite.push(item.id);\n      }\n      console.log(this.myFavorite);\n      // storageMethods.save(this.myFavorite);\n    },\n    getProducts(page = 1) {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/?page=${page}`;\n      this.isLoading = true;\n      this.$http.get(url).then((response) => {\n        this.products = response.data.products;\n        console.log('products:', response);\n        this.isLoading = false;\n        if (response.data.success) {\n          console.log(response.data);\n          this.products = response.data.products;\n          this.pagination = response.data.pagination;\n          this.getCategories();\n        }\n      });\n    },\n    getCategories() {\n      // Vue 3 雙向綁定 Proxy(new Proxy 物件)\n      // new Set\n      const categories = new Set();\n      this.products.forEach((item) => {\n        categories.add(item.category);\n      });\n      this.categories = [...categories];\n    },\n    getProduct(id) {\n      this.$router.push(`/product/${id}`);\n    },\n    addCart(id) {\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`;\n      this.status.loadingItem = id;\n      const cart = {\n        product_id: id,\n        qty: 1,\n      };\n      this.$http.post(url, { data: cart }).then((res) => {\n        this.status.loadingItem = '';\n        console.log(res);\n        emitter.emit('update-cart'); // 更新購物車數量\n      });\n    },\n  },\n  watch: {\n    myFavorite: {\n      // 深層監聽\n      handler() {\n        storageMethods.save(this.myFavorite);\n      },\n      deep: true,\n    },\n  },\n  computed: {\n    // 產生新的資料集\n    filterProducts() {\n      return this.products.filter((item) => item.category.match(this.selectCategory));\n      // 空字串，或任何符合結果都會是 “真值”\n    },\n  },\n  created() {\n    // 改為 mounted\n    this.getProducts();\n  },\n};\n</script>\n","import { render } from \"./SwiperTest.vue?vue&type=template&id=ed0c9cce\"\nimport script from \"./SwiperTest.vue?vue&type=script&lang=js\"\nexport * from \"./SwiperTest.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\六角學院\\\\2022春季 vue直播班\\\\week7_主線任務lv3\\\\week7_lv3\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}