(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0aa934"],{1230:function(e,t,c){"use strict";c.r(t);c("a4d3"),c("e01a"),c("caad"),c("2532");var o=c("7a23"),n={class:"container"},r={class:"row"},a={class:"col-3 mt-4"},i={class:"list-group rounded-0"},s=["onClick"],l={class:"col-9"},d={class:"row mt-4"},u={class:"col mb-4"},b={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"},p={class:"card h-100 rounded-0"},g=["onClick"],m={class:"card-body"},O={class:"badge bg-secondary text-light mb-2"},j={class:"card-title"},v={class:"h6 text-secondary"},h={key:0,class:"h5 list-inline-item"},y={key:1,class:"h6 list-inline-item text-secondary mt-4"},k={key:2,class:"h5 text-danger mb-3"},f={class:"d-grid gap-2 col-12 mx-auto"},E=["disabled","onClick"],N={key:0,class:"spinner-border text-danger spinner-border-sm",role:"status"},V=Object(o["createElementVNode"])("span",{class:"visually-hidden"},"Loading...",-1),C=[V],w=Object(o["createTextVNode"])(" 加到購物車 "),B=["onClick"],F=["onClick"];function S(e,t,c,V,S,x){var P=this,I=Object(o["resolveComponent"])("Loading"),L=Object(o["resolveComponent"])("swiper-slide"),D=Object(o["resolveComponent"])("swiper"),$=Object(o["resolveComponent"])("Pagination");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createVNode"])(I,{active:e.isLoading},null,8,["active"]),Object(o["createVNode"])(D,{"slides-per-view":1,"space-between":50},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(S.products,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(L,{key:e.id},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",{style:Object(o["normalizeStyle"])([{height:"300px","background-position":"center center","background-size":"cover"},{backgroundImage:"url(".concat(e.imageUrl,")")}])},null,4)]})),_:2},1024)})),128))]})),_:1}),Object(o["createElementVNode"])("div",n,[Object(o["createElementVNode"])("div",r,[Object(o["createElementVNode"])("div",a,[Object(o["createElementVNode"])("div",i,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(S.categories,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("a",{href:"#",key:e,class:"list-group-item list-group-item-action",onClick:Object(o["withModifiers"])((function(t){return S.selectCategory=e}),["prevent"])},Object(o["toDisplayString"])(e),9,s)})),128))])]),Object(o["createElementVNode"])("div",l,[Object(o["createElementVNode"])("div",d,[Object(o["createElementVNode"])("div",u,[Object(o["createElementVNode"])("div",b,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(x.filterProducts,(function(t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"col",key:t.id},[Object(o["createElementVNode"])("div",p,[Object(o["createElementVNode"])("a",{href:"#",class:"rounded-0",onClick:Object(o["withModifiers"])((function(e){return x.getProduct(t.id)}),["prevent"])},[Object(o["createElementVNode"])("div",{style:Object(o["normalizeStyle"])([{height:"300px","background-size":"cover","background-position":"center"},{backgroundImage:"url(".concat(t.imageUrl,")")}])},null,4)],8,g),Object(o["createElementVNode"])("div",m,[Object(o["createElementVNode"])("span",O,Object(o["toDisplayString"])(t.category),1),Object(o["createElementVNode"])("h5",j,Object(o["toDisplayString"])(t.title),1),Object(o["createElementVNode"])("h6",v,Object(o["toDisplayString"])(t.description),1),t.price?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",h,Object(o["toDisplayString"])(t.origin_price)+" 元 ",1)),t.price?(Object(o["openBlock"])(),Object(o["createElementBlock"])("del",y,"原價 NT$ "+Object(o["toDisplayString"])(e.$filters.currency(t.origin_price))+" 元",1)):Object(o["createCommentVNode"])("",!0),t.price?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",k," NT$ "+Object(o["toDisplayString"])(e.$filters.currency(t.price))+" 元 ",1)):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",f,[Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary rounded-0 border",disabled:P.status.loadingItem===t.id,onClick:function(e){return x.addCart(t.id)}},[P.status.loadingItem===t.id?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",N,C)):Object(o["createCommentVNode"])("",!0),w],8,E),Object(o["createElementVNode"])("button",{type:"button",onClick:function(e){return x.addMyFavorite(t)},class:Object(o["normalizeClass"])([{active:S.myFavorite.includes(t.id)},"btn d-block btn-outline-secondary rounded-0 border"])}," 加到我的最愛 ",10,B),Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary rounded-0 border",onClick:function(e){return x.getProduct(t.id)}}," 查看更多 ",8,F)])])])])})),128))])]),Object(o["createVNode"])($,{pages:S.pagination,onEmitPages:x.getProducts},null,8,["pages","onEmitPages"])])])])])],64)}var x=c("2909"),P=(c("e9c4"),c("a434"),c("99af"),c("d3b7"),c("6062"),c("3ca3"),c("ddb0"),c("159b"),c("4de4"),c("ac1f"),c("466d"),c("8349")),I=c("cfb9"),L=c("1799"),D=(c("5f67"),{save:function(e){var t=JSON.stringify(e);localStorage.setItem("hexFavorite",t)},get:function(){return JSON.parse(localStorage.getItem("hexFavorite"))}}),$={data:function(){return{products:[],product:{},pagination:{},status:{loadingItem:""},categories:[],selectCategory:"",myFavorite:D.get()||[]}},components:{Pagination:L["a"],Swiper:P["a"],SwiperSlide:P["b"]},provide:function(){return{emitter:I["a"]}},methods:{addMyFavorite:function(e){console.log("addMyFavorite"),this.myFavorite.includes(e.id)?this.myFavorite.splice(this.myFavorite.indexOf(e.id),1):this.myFavorite.push(e.id),console.log(this.myFavorite)},getProducts:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("jiangs2022vue3","/products/?page=").concat(t);this.isLoading=!0,this.$http.get(c).then((function(t){e.products=t.data.products,console.log("products:",t),e.isLoading=!1,t.data.success&&(console.log(t.data),e.products=t.data.products,e.pagination=t.data.pagination,e.getCategories())}))},getCategories:function(){var e=new Set;this.products.forEach((function(t){e.add(t.category)})),this.categories=Object(x["a"])(e)},getProduct:function(e){this.$router.push("/product/".concat(e))},addCart:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("jiangs2022vue3","/cart");this.status.loadingItem=e;var o={product_id:e,qty:1};this.$http.post(c,{data:o}).then((function(e){t.status.loadingItem="",console.log(e),I["a"].emit("update-cart")}))}},watch:{myFavorite:{handler:function(){D.save(this.myFavorite)},deep:!0}},computed:{filterProducts:function(){var e=this;return this.products.filter((function(t){return t.category.match(e.selectCategory)}))}},created:function(){this.getProducts()}},z=c("6b0d"),M=c.n(z);const _=M()($,[["render",S]]);t["default"]=_}}]);
//# sourceMappingURL=chunk-2d0aa934.dc707d0c.js.map